<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/pages/californiatemplate/template.xhtml">

    <ui:define name="title">Dashboard</ui:define>

    <ui:define name="viewname">Dashboard</ui:define>

    <ui:define name="content">

        <!-- Add custom CSS for this specific page layout -->
        <h:outputStylesheet>
            .profile-cover {
                background: linear-gradient(90deg, rgba(20,93,204,1) 0%, rgba(3,126,243,1) 100%);
                height: 180px;
                border-radius: var(--border-radius); /* Use theme's border radius */
                position: relative;
                display: flex;
                align-items: flex-end;
                justify-content: flex-end;
                padding: 1rem;
            }
            .profile-avatar-container {
                margin-top: -60px; /* Pull the avatar up over the cover */
                position: relative;
                display: inline-block; /* To wrap around the image */
            }
            .profile-avatar {
                width: 120px;
                height: 120px;
                border-radius: 50%;
                border: 4px solid #fff;
                box-shadow: 0 2px 4px 0 rgba(0,0,0,0.1);
                background-color: #e9ecef; /* Placeholder bg color */
            }
            .avatar-edit-button {
                position: absolute;
                bottom: 10px;
                right: 10px;
                width: 32px;
                height: 32px;
                background-color: #2196F3;
                color: white;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                text-decoration: none;
                border: 2px solid white;
            }
            .avatar-edit-button i {
                font-size: 1rem;
            }
            .donut-chart-container {
                position: relative;
                width: 180px; /* Control size */
                height: 180px;
                margin: 0 auto;
            }
            .donut-chart-container .ui-chart {
                position: absolute;
                top: 0;
                left: 0;
            }
            .donut-chart-label {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 2rem;
                font-weight: 600;
                color: #495057; /* PrimeFaces text color */
            }
        </h:outputStylesheet>

        <h:form id="dashboardForm">
            <!-- Blue Cover Photo Section -->
            <div class="profile-cover">
                <p:commandButton value="Change Cover" icon="pi pi-camera" styleClass="ui-button-outlined ui-button-secondary" />
            </div>

            <div class="p-grid p-mt-3">

                <!-- Left Column: Profile Card -->
                <div class="p-col-12 p-lg-4">
                    <div class="card p-text-center">
                        <div class="profile-avatar-container">
                            <p:graphicImage name="images/unnamed.png" library="california-layout" styleClass="profile-avatar"/>
                            <p:commandLink styleClass="ui-avatar-icon" style="color: white">
                                <i class="pi pi-camera"></i>
                            </p:commandLink>
                        </div>

                        <h4 class="p-mt-3 p-mb-0">#{profileView.model.fullName}</h4>
                        <span class="text-secondary">#{profileView.model.roles}</span>

                        <p:divider styleClass="p-my-4"/>

                        <h5 class="p-mb-3">Latest Cycle</h5>
                        <div class="donut-chart-container">
                            <!-- Donut chart. The model needs to be created in a backing bean. -->
<!--                            <p:chart type="donut" model="#{dashboardBean.donutModel}" />-->
                            <div class="donut-chart-label">78%</div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Settings Card -->
                <div class="p-col-12 p-lg-8">
                    <div class="card">
                        <p:tabView>
                            <p:tab title="Account settings">
                                <div class="p-fluid p-formgrid p-grid p-mt-2">
                                    <div class="p-field p-col-12 p-md-6">
                                        <label for="firstname">First Name</label>
                                        <p:inputText id="firstname" value="John" />
                                    </div>
                                    <div class="p-field p-col-12 p-md-6">
                                        <label for="lastname">Last Name</label>
                                        <p:inputText id="lastname" placeholder="Enter last name"/>
                                    </div>
                                    <div class="p-field p-col-12">
                                        <label for="email">Email Address</label>
                                        <p:inputText id="email" placeholder="Enter email address"/>
                                    </div>
                                    <div class="p-col-12 p-mt-3">
                                        <p:commandButton value="Update" />
                                    </div>
                                </div>
                            </p:tab>
                            <p:tab title="Notification">
                                <div class="p-p-3">
                                    <p>Notification settings will be displayed here.</p>
                                </div>
                            </p:tab>
                        </p:tabView>
                    </div>
                </div>

            </div>
        </h:form>
    </ui:define>

</ui:composition>