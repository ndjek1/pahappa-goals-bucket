<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/pages/californiatemplate/template.xhtml">

    <ui:define name="head">
        <style>
            /* Custom button styling remains as requested */
            .custom-btn {
                background: transparent !important;
                border: none !important;
                box-shadow: none !important;
                display: flex;
                align-items: center;
                padding: 6px 10px;
            }
            .custom-btn:hover {
                background: #f0f0f0 !important;
                border-radius: 8px;
            }
            .custom-icon { font-size: 1.2rem; }
            .custom-icon-edit { color: orange; font-size: 1.2rem; }
        </style>
    </ui:define>

    <ui:define name="content">
        <h:form id="goalForm">

            <p:growl id="growl" showDetail="true" life="4000"/>


            <p:tabView>
                <!-- =============================== -->
                <!-- TAB 1: ORGANIZATION GOALS       -->
                <!-- =============================== -->
                <p:tab title="Organization Goals">
                    <!-- Filters for Organization Goals -->
                    <div class="p-d-flex p-ai-center p-jc-between p-mb-3 card p-p-3">

                        <!-- Left side: search/filter controls -->
                        <div class="p-d-flex p-ai-center">
                            <p:inputText placeholder="Search Organization Goal" styleClass="p-mr-2"/>
                            <p:selectOneMenu value="..." styleClass="p-mr-2">
                                <f:selectItem itemLabel="Status" itemValue=""/>
                            </p:selectOneMenu>
                            <p:commandButton value="Search" icon="pi pi-search"/>
                        </div>

                        <!-- Right side: set goal button -->
                        <p:commandButton value="Set Goal" icon="pi pi-plus"
                                         style="background:#6DBE46"
                                         actionListener="#{organizationGoalForm.show}">
                            <f:setPropertyActionListener value="#{null}" target="#{organizationGoalForm.model}"/>
                            <p:ajax event="dialogReturn" listener="#{organizationGoalsView.reloadFilterReset}" update="goalForm"/>
                        </p:commandButton>

                    </div>


                    <p:dataTable id="organizationGoalsTable" var="model" value="#{organizationGoalsView.dataModels}"
                                 paginator="true" rows="10" lazy="true" paginatorPosition="bottom"
                                 emptyMessage="No organization goals found.">

                        <p:column headerText="No." width="50">
                            <h:outputText value="#{row + 1}"/>
                        </p:column>
                        <p:column headerText="Title" >
                            <h:outputText value="#{model.name}"/>
                        </p:column>
                        <p:column headerText="Created by" >
                            <h:outputText value="#{model.createdBy}"/>
                        </p:column>
                        <p:column headerText="Created on" >
                            <h:outputText value="#{model.dateCreated}">
                                <f:convertDateTime pattern="dd MMM yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Review Cycle" >
                            <h:outputText value="#{model.reviewCycle.title}"/>
                        </p:column>
                        <p:column headerText="Action" exportable="false" style="text-align: center; white-space: nowrap;">
                            <!-- View Button -->
                            <p:commandButton title="View"
                                             icon="pi pi-eye"
                                             styleClass="p-button-sm p-mr-2"
                                             action="#{goalDetailsView.prepareForCategory(model.id)}"
                                              />

                            <!-- Edit Button -->
                            <p:commandButton title="Edit"
                                             icon="pi pi-pencil"
                                             styleClass="p-button-sm p-button-warning"
                                             />
                        </p:column>

                    </p:dataTable>
                </p:tab>

                <!-- =============================== -->
                <!-- TAB 2: DEPARTMENT GOALS         -->
                <!-- =============================== -->
                <p:tab title="Department Goals">

                    <div class="p-d-flex p-ai-center p-jc-between p-mb-3 card p-p-3">

                        <!-- Left side: search/filter controls -->
                        <div class="p-d-flex p-ai-center">
                            <p:inputText placeholder="Search Department Goal" style="flex:1" styleClass="p-mr-2"/>
                            <p:selectOneMenu value="..." styleClass="p-mr-2">
                                <f:selectItem itemLabel="Department" itemValue=""/>
                            </p:selectOneMenu>
                            <p:selectOneMenu value="..." styleClass="p-mr-2">
                                <f:selectItem itemLabel="Status" itemValue=""/>
                            </p:selectOneMenu>

                        </div>

                        <!-- Right side: set goal button -->
                        <p:commandButton value="Search" icon="pi pi-search"/>

                    </div>

                    <p:dataTable id="departmentGoalsTable" var="depatGoal" value="#{organizationGoalsView.departmentGoals}"
                                 paginator="true" rows="10" lazy="true" paginatorPosition="bottom"
                                 emptyMessage="No department goals found.">

                        <p:column headerText="Title" >
                            <h:outputText value="#{depatGoal.name}"/>
                        </p:column>
                        <p:column headerText="Weight"  width="100">
                            <h:outputText value="#{depatGoal.contributionWeight}%"/>
                        </p:column>
                        <p:column headerText="Status" width="150">
                            <p:badge value="#{depatGoal.status.name()}"
                                     severity="#{depatGoal.status.toString() eq 'ACTIVE' ? 'success' : (depatGoal.status.toString() eq 'PENDING' ? 'warning' : 'info')}"/>
                        </p:column>
                        <p:column headerText="Created by" >
                            <h:outputText value="#{depatGoal.createdBy}"/>
                        </p:column>
                        <p:column headerText="Created on" >
                            <h:outputText value="#{depatGoal.dateCreated}">
                                <f:convertDateTime pattern="dd MMM yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Action" exportable="false" width="100" style="text-align: center">
                            <p:commandButton title="View"
                                             icon="pi pi-eye"
                                             styleClass="p-button-sm p-mr-2"

                            />
                        </p:column>
                    </p:dataTable>
                </p:tab>

                <!-- =============================== -->
                <!-- TAB 3: TEAM GOALS               -->
                <!-- =============================== -->
                <p:tab title="Team Goals">
                    <!-- Filters for Team Goals -->
                    <div class="p-d-flex p-ai-center p-jc-between p-mb-3 card p-p-3">

                        <!-- Left side: search/filter controls -->
                        <div class="p-d-flex p-ai-center">
                            <p:inputText placeholder="Search Team Goal" style="flex:1" styleClass="p-mr-2"/>
                            <p:selectOneMenu value="..." styleClass="p-mr-2">
                                <f:selectItem itemLabel="Team" itemValue=""/>
                            </p:selectOneMenu>
                            <p:selectOneMenu value="..." styleClass="p-mr-2">
                                <f:selectItem itemLabel="Status" itemValue=""/>
                            </p:selectOneMenu>

                        </div>

                        <!-- Right side: set goal button -->
                        <p:commandButton value="Search" icon="pi pi-search"/>

                    </div>

                    <p:dataTable id="teamGoalsTable" var="teamGoal" value="#{organizationGoalsView.teamGoals}"
                                 paginator="true" rows="10" lazy="true" paginatorPosition="bottom"
                                 emptyMessage="No team goals found.">

                        <p:column headerText="Title" >
                            <h:outputText value="#{teamGoal.name}"/>
                        </p:column>
                        <p:column headerText="Weight" width="100">
                            <h:outputText value="#{teamGoal.contributionWeight}%"/>
                        </p:column>
                        <p:column headerText="Status"  width="150">
                            <p:badge value="#{teamGoal.status.name()}"
                                     severity="#{teamGoal.status.toString() eq 'ACTIVE' ? 'success' : (teamGoal.status.toString() eq 'PENDING' ? 'warning' : 'info')}"/>
                        </p:column>
                        <p:column headerText="Created by" >
                            <h:outputText value="#{teamGoal.createdBy}"/>
                        </p:column>
                        <p:column headerText="Created on">
                            <h:outputText value="#{teamGoal.dateCreated}">
                                <f:convertDateTime pattern="dd MMM yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Action" exportable="false" width="100" style="text-align: center">
                            <p:commandButton title="View"
                                             icon="pi pi-eye"
                                             styleClass="p-button-sm p-mr-2"
                            />
                        </p:column>
                    </p:dataTable>
                </p:tab>
            </p:tabView>
        </h:form>
    </ui:define>
</ui:composition>