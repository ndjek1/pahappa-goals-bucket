<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/pages/californiatemplate/template.xhtml">

    <ui:define name="head">
        <style>
            .capitalized { text-transform: capitalize; }
            .activity-nav-card {
                cursor: pointer;
                transition: all 0.3s ease;
                border: 1px solid #e0e0e0;
                padding: 2px;
                border-radius: 8px;
                background: #f9fafb;
            }
            .activity-nav-card:hover { transform: translateY(-1px); box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
            .icon-circle { display:inline-flex; align-items:center; justify-content:center; width:20px; height:20px; border-radius:50%; color:#fff; font-size:10px; }
            .nav-card { background: #f9fafb; }
            .bg-green { background:#22c55e; } .bg-blue { background:#3b82f6; } .bg-purple { background:#8b5cf6; } .bg-orange { background:#f59e0b; } .bg-cyan { background:#06b6d4; }
            .nav-card h6 { margin:0; font-size:0.7rem; }
            .nav-card p { margin:0; font-size:0.64rem; color:#6b7280; }
            .stat-value { margin-left:auto; font-size:0.95rem; font-weight:600; }
            .text-primary { color:#3b82f6; } .text-success { color:#10b981; } .text-warning { color:#f59e0b; }
            .p-grid { margin:0 -0.2rem; } [class*='p-col-'] { padding:0 0.2rem; box-sizing: border-box; }
            .filter-input, .filter-select, .filter-calendar { width:100%; font-size:0.72rem; padding:0.16rem 0.28rem; border:1px solid #d1d5db; border-radius:0.3rem; }
            .breadcrumb-card { padding:3px 5px; margin:0 0 4px 0; }
            .breadcrumb-card .ui-breadcrumb { font-size:0.76rem; padding:0; margin:0; }
            .breadcrumb-card .ui-breadcrumb .ui-menuitem-link { padding:1px 5px; }
            .d-flex { display:flex; } .align-items-center { align-items:center; } .flex-grow-1 { flex-grow:1; } .me-3 { margin-right:0.35rem; }
            
            /* Custom button styles */
            .custom-btn {
                background: transparent !important;
                border: none !important;
                box-shadow: none !important;
                display: flex;
                align-items: center;
                padding: 6px 10px;
            }
            .custom-btn:hover {
                background: #b3d1e6 !important;
                border-radius: 8px;
            }
            .custom-icon {
                font-size: 1.2rem;
            }
            .custom-icon-edit {
                color: orange;
                font-size: 1.2rem;
            }
        </style>
    </ui:define>

    <ui:define name="content">
        <h:form id="individualGoalsView" enctype="multipart/form-data">
                        <p:growl id="messages" showDetail="true" />


            <div class="p-d-flex p-ai-center p-jc-between p-mb-3 card p-p-3">

                <!-- Left side: Title + Filters -->
                <div class="p-d-flex p-ai-center">


                    <!-- Search Input -->
                    <p:inputText placeholder="Search Goal" styleClass="p-mr-2"/>

                    <!-- Status Filter -->
                    <p:selectOneMenu value="#{individualGoalsView.search}" styleClass="p-mr-2">
                        <f:selectItem itemLabel="Status" itemValue=""/>
                        <f:selectItem itemLabel="Active" itemValue="ACTIVE"/>
                        <f:selectItem itemLabel="Pending" itemValue="PENDING"/>
                        <f:selectItem itemLabel="Completed" itemValue="COMPLETED"/>
                    </p:selectOneMenu>

                    <!-- Search Button -->
                    <p:commandButton value="Search" icon="pi pi-search"
                                     actionListener="#{individualGoalsView.reloadFilterReset}"/>
                </div>

                <!-- Right side: Add Goal Button -->
                <p:commandButton value="Set Goal" icon="pi pi-plus"
                                 styleClass="add-button"
                                 actionListener="#{teamGoalForm.show}">
                    <f:setPropertyActionListener value="#{null}" target="#{teamGoalForm.model}"/>
                    <p:ajax event="dialogReturn" listener="#{individualGoalsView.reloadFilterReset}" update="individualGoalsView"/>
                </p:commandButton>
            </div>

            <!-- Goal Cards -->
            <div class="p-grid p-nogutter p-mt-2" style="background: white">
                <!-- Goals Table -->
                <p:dataTable value="#{individualGoalsView.dataModels}" var="goal"
                             paginator="true" rows="10"
                             paginatorPosition="bottom"
                             styleClass="p-datatable-striped p-datatable-sm"
                             responsiveLayout="scroll">

                    <p:column headerText="Goal Title" >
                        <h:outputText value="#{goal.name}"/>
                    </p:column>

                    <p:column headerText="Weight" >
                        <h:outputText value="#{goal.contributionWeight}"/>
                        <h:outputText value="%" />
                    </p:column>

                    <p:column headerText="Created On" >
                        <h:outputText value="#{goal.dateCreated}">
                            <f:convertDateTime pattern="dd MMM yyyy"/>
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Actions" style="width:120px; text-align:center;">
                        <p:commandButton icon="pi pi-eye" title="View"
                                         styleClass="ui-button-info p-button-sm"
                                         action="#{individualGoalDetails.prepareForIndividualGoal(goal.id)}"/>
                    </p:column>
                </p:dataTable>
            </div>
        </h:form>
    </ui:define>
</ui:composition>
