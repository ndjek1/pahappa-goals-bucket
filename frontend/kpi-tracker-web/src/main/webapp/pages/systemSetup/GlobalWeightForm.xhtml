<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/pages/californiatemplate/dialog-template.xhtml">

    <ui:define name="content">
        <title>Manage Global Weight</title>
        <h:form id="globalWeightDialog" styleClass="ui-fluid formgrid grid"
        rendered="#{globalWeightsForm.activeReviewCycle != null}">

            <p:growl id="growl" showDetail="true" life="4000" />

            <div class="field col-12 p-m-4">
                <div class="field col-12 " >
                    <h:outputText
                            value="#{globalWeightsForm.model.reviewCycle == null
              ? 'Current review cycle: '
              : 'Review cycle: '}#{globalWeightsForm.activeReviewCycle.title}" />


                </div>

            </div>

            <!-- Business Goal Weight -->
            <div class="field col-12 p-mx-4 p-mb-2">
                <p:outputLabel for="mboWeightInput" value="Business goal weight" />
                <p:inputText id="mboWeightInput"
                             value="#{globalWeightsForm.model.mboWeight}"
                             required="true">
                    <p:ajax event="keyup"
                            listener="#{globalWeightsForm.updateOrgFitWeight}"
                            process="@this"
                            update="orgFitWeightInput" />
                </p:inputText>
            </div>

            <!-- Organizational Fit Weight -->
            <div class="field col-12 p-mx-4">
                <p:outputLabel for="orgFitWeightInput" value="Organizational fit weight" />
                <p:inputText id="orgFitWeightInput"
                             value="#{globalWeightsForm.model.orgFitWeight}"
                             required="true">
                    <p:ajax event="keyup"
                            listener="#{globalWeightsForm.updateMboWeight}"
                            process="@this"
                            update="mboWeightInput" />
                </p:inputText>
            </div>

            <!-- Buttons -->
            <div class="col-12 p-mx-4" style="margin-top: 2rem; display: flex; justify-content: space-between; gap: 1rem;">
                <p:commandButton value="Cancel"
                                 validateClient="false"
                                 process="@this"
                                 action="#{globalWeightsForm.hide}"
                                 styleClass="ui-button-danger p-mx-5"
                                 style="flex: 1;" />

                <p:commandButton value="Save"
                                 process="@form"
                                 actionListener="#{globalWeightsForm.save}"
                                 update="@form growl"
                                 validateClient="true"
                                 style="flex: 1;"
                                 styleClass="ui-button-primary p-mx-5"
                />
            </div>

        </h:form>
        <!-- Case: Active review cycle is null -->
        <h:panelGroup rendered="#{globalWeightsForm.activeReviewCycle == null}">
            <h:outputText value="No active review cycle available. Please create one first."
                          style="color: red; font-weight: bold; font-size: 1.1em;" />
        </h:panelGroup>
    </ui:define>
</ui:composition>
