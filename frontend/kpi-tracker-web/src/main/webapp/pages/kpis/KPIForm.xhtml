<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/pages/californiatemplate/dialog-template.xhtml">
    <ui:define name="head">
        <style type="text/css">
            .capitalized {
                text-transform: capitalize;
            }
        </style>
    </ui:define>
    <ui:define name="content">
        <title>Add KPI</title>

        <h:form id="kpiForm" styleClass="dialog-card">
            <p:growl id="growl" showDetail="true" life="4000" />

            <div class="ui-fluid formgrid grid p-m-4">

                <!-- KPI Name -->
                <div class="field col-12 p-m-4">
                    <p:inputText value="#{kpiForm.model.name}"
                                 required="true"
                                 placeholder="KPI Name"
                                 styleClass="p-inputtext-sm w-full"/>
                </div>

                <!-- Measurement Unit -->
                <div class="field col-12 md:col-6 p-m-4">
                    <p:selectOneMenu value="#{kpiForm.model.measurementUnit}" required="true" filter="true" filterMatchMode="contains">
                        <f:selectItem itemLabel="Select Measurement Unit" itemValue="#{null}" noSelectionOption="true"/>
                        <f:selectItems value="#{kpiForm.measurementUnits}" var="unit" itemLabel="#{unit.displayName}" itemValue="#{unit}" />
                    </p:selectOneMenu>
                </div>

                <!-- Frequency -->
                <div class="field col-12 md:col-6 p-m-4">
                    <p:selectOneMenu value="#{kpiForm.model.frequency}" required="true" filter="true" filterMatchMode="contains">
                        <f:selectItem itemLabel="Select Frequency" itemValue="#{null}" noSelectionOption="true"/>
                        <f:selectItems value="#{kpiForm.frequencies}" var="freq" itemLabel="#{freq.displayName}" itemValue="#{freq}" />
                    </p:selectOneMenu>
                </div>

                <!-- Target Value -->
                <div class="field col-12 md:col-6 p-m-4">
                    <p:inputNumber value="#{kpiForm.model.targetValue}" 
                                   required="true" 
                                   placeholder="Target Value" 
                                   minValue="0" 
                                   decimalPlaces="2"
                                   styleClass="p-inputtext-sm w-full"/>
                </div>

                <!-- Current Value -->
                <div class="field col-12 md:col-6 p-m-4">
                    <p:inputNumber value="#{kpiForm.model.currentValue}" 
                                   placeholder="Current Value" 
                                   minValue="0" 
                                   decimalPlaces="2"
                                   styleClass="p-inputtext-sm w-full"/>
                </div>

                <!-- Start Date -->
                <div class="field col-12 md:col-6 p-m-4">
                    <p:calendar value="#{kpiForm.model.startDate}" 
                                required="true" 
                                showTime="false" 
                                pattern="MM/dd/yyyy" 
                                placeholder="Start Date"
                                styleClass="p-inputtext-sm w-full"/>
                </div>

                <!-- End Date -->
                <div class="field col-12 md:col-6 p-m-4">
                    <p:calendar value="#{kpiForm.model.endDate}" 
                                showTime="false" 
                                pattern="MM/dd/yyyy" 
                                placeholder="End Date (Optional)"
                                styleClass="p-inputtext-sm w-full"/>
                </div>

                <!-- Department Goal -->
                <div class="field col-12 md:col-6 p-m-4">
                    <p:selectOneMenu value="#{kpiForm.model.departmentGoal}" filter="true" filterMatchMode="contains">
                        <f:selectItem itemLabel="Select Department Goal (Optional)" itemValue="#{null}" noSelectionOption="true"/>
                        <f:selectItems value="#{kpiForm.departmentGoals}" var="deptGoal" itemLabel="#{deptGoal.name}" itemValue="#{deptGoal}" />
                    </p:selectOneMenu>
                </div>

                <!-- Team Goal -->
                <div class="field col-12 md:col-6 p-m-4">
                    <p:selectOneMenu value="#{kpiForm.model.teamGoal}" filter="true" filterMatchMode="contains">
                        <f:selectItem itemLabel="Select Team Goal (Optional)" itemValue="#{null}" noSelectionOption="true"/>
                        <f:selectItems value="#{kpiForm.teamGoals}" var="teamGoal" itemLabel="#{teamGoal.name}" itemValue="#{teamGoal}" />
                    </p:selectOneMenu>
                </div>

                <!-- Buttons -->
                <div class="field col-12 p-d-flex p-jc-between">
                    <p:commandButton value="Cancel"
                                     immediate="true"
                                     action="#{kpiForm.hide}"
                                     styleClass="ui-button-danger p-mx-5" />

                    <p:commandButton value="Save"
                                     process="@form"
                                     actionListener="#{kpiForm.save}"
                                     update="@form growl"
                                     styleClass="ui-button-primary p-mx-5" />
                </div>

            </div>

        </h:form>
    </ui:define>
</ui:composition>
